#include <iostream>
#include <fstream>
#include <vector>

//int notavailable (std::vector list, std::string input);

int main ()
{
  std::string input {};
  std::string day {};
  std::vector <std::string> product {};
  std::vector <std::string> costumer {};
  
  std::ofstream newdata{"dbnew.txt"};
  std::ifstream data{"db.txt"};
  
  while ( data && newdata.is_open() )
    {
      data >> input;
      std::cout << "input : " << input<< std::endl;
      if ( day != input.substr(0,11)+"]")
	{
	  if (product.size() != 0)
	    newdata << day << " " << product.size() << " " << costumer.size() << "\n";
	  day = input.substr(0,11)+"]";
	  product.clear();
	  costumer.clear();
	  product.push_back(input.substr(19,3));
	  costumer.push_back(input.substr(23,4));
	}
      else
	{
	  // if ( notavailable ( product,input.substr(19,3)))
	    product.push_back(input.substr(19,3));
	  //	  if (notavailable ( costumer,input.substr(23,4)))
	    costumer.push_back(input.substr(23,4));
	}
      
    }
  newdata << day << " " << product.size() << " " << costumer.size() << "\n";
  std::string product_code {input.substr(19,3)+" "};
  std::cout << "products : " <<product_code << product.size() <<  std::endl; 
}

/*int notavailable (std::vector list, std::string input)
{
  for (size_t i {}; i < list.size(); i ++)
    if ( input == list[i] )
      return 0;
  return 1;
}
*/
